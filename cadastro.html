<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>TELA DE CADASTRO</h1>

    <input type="text" placeholder="nome" id="name"><br>
    <input type="text" placeholder="sobrenome" id="lastname"><br>
    <input type="text" placeholder="endereÃ§o" id="address"><br>
    <input type="text" placeholder="cpf" id="cpf"><br>
    <input type="text" placeholder="data de nascimento" id="birthdate"><br>
    <input type="password" placeholder="senha" id="password"><br>
    <input type="password" placeholder="confirmar senha" id="confirmpassword"><br><br>

    <button onclick="cadastrar()">CADASTRAR</button><br><br>

    <ul id="ul_mensagem"></ul>
</body>
</html>
<script>
    async function cadastrar() {
        let name = document.getElementById("name").value
        let lastname = document.getElementById("lastname").value
        let address = document.getElementById("address").value
        let cpf = document.getElementById("cpf").value
        let birthdate = document.getElementById("birthdate").value
        let password = document.getElementById("password").value
        let confirmpassword = document.getElementById("confirmpassword").value

        let  cadastrarUsuario = fetch("http://localhost:3000/user", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                name: name,
                lastname: lastname,
                address: address,
                cpf: cpf,
                birthdate: birthdate,
                password: password,
                userType: "COSTUMER"
            })
        })
        mostrar()
    }

    async function mostrar() {
        let mostrarUsuarios = await fetch("http://localhost:3000/user", {
            method: "GET",
            headers: {
                "Content-Type": "application/json"
            }
        })

        let usuarios = await mostrarUsuarios.json()
        
        ul_mensagem.innerHTML += `<li>${usuarios[0].name}</li><br>`
    }
</script>